<!DOCTYPE html>
<html lang="zh-cn">


<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>
    ES6 你可能不知道的事(一) | Vikibeta_lab x.x
  </title>
  <meta name="description" content="Virtual.Interactive.Kinetic.Intelligence.">
  
  <meta name="keywords" content="
  
  ">
  
  <meta name="author" content="King">

  <meta http-equiv="Cache-Control" content="no-transform"/>
  <meta http-equiv="Cache-Control" content="no-siteapp">

  <link rel="icon" type="image/x-icon" href="undefined">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet"
        href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  

  

  <script src="//cdnjs.cloudflare.com/ajax/libs/vue/1.0.25-csp/vue.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.2/moment.min.js"></script>
</head>

<body id="replica-app">

<nav class="navbar-wrapper">
  <div class="navbar">
    <div class="container clearfix">
      <a href="/" class="navbar-logo"><i class="fa fa-github"></i></a>

      <div class="navbar-search float-left desktop-only">
        <div class="navbar-search-form">
          <label for="gsc-i-id1">This website</label>
          <div id="google-search">
            <gcse:search></gcse:search>
          </div>
        </div>
      </div>

      <ul class="navbar-nav float-left">
        
        <li><a href="/archives">Archives</a></li>
        
        
        <li><a href="/categories">Categories</a></li>
        
        
        <li><a href="/tags">Tags</a></li>
        
        
        <li><a href="/atom.xml" target="_blank">RSS</a></li>
        
      </ul>

      <ul class="navbar-nav user-nav float-right desktop-only">
        <li class="user-nav-notification">
          <a><span class="user-nav-unread"></span><i class="fa fa-bell"></i></a>
        </li>
        <li>
          <a><i class="fa fa-plus"></i> <i class="fa fa-caret-down"></i></a>
        </li>
        <li class="user-nav-logo">
          <a><img src="/images/avatar.png"> <i class="fa fa-caret-down"></i></i></a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="main-container">
  <header class="header-wrapper desktop-only">
  <div class="container header-site-detail">
    <ul class="header-toolbar">
      <li class="clearfix">
        <a href="/archives" class="header-toolbar-left"><i
                  class="fa fa-file-text"></i> Posts </a>
        <a href="/archives"
           class="header-toolbar-right"> 2 </a>
      </li>
      <li>
        <a href="/tags" class="header-toolbar-left"><i
                  class="fa fa-tags"></i> Tags </a>
        <a href="/tags"
           class="header-toolbar-right"> 0 </a>
      </li>
      <li>
        <a href="/categories" class="header-toolbar-left"><i
                  class="fa fa-folder-open"></i> Categories </a>
        <a href="/categories"
           class="header-toolbar-right"> 2 </a>
      </li>
    </ul>
    <h2 class="header-title">
      <i class="fa fa-book text-muted"></i>
      <a href="/">Vikibeta_lab x.x</a>
      
      
    </h2>
  </div>

  <div class="container">
    <div class="header-tab-wrapper clearfix">
      <span class="header-tab header-tab-selected"><i class="fa fa-thumbs-o-up"></i> Like</span>
      <span class="header-tab"><i class="fa fa-share-alt"></i> Share</span>
      <span class="header-tab"><i class="fa fa-comments-o"></i> Discussion</span>
      <span class="header-tab"><i class="fa fa-bookmark-o"></i> Bookmark </span>
      <span class="header-tab"><i class="fa fa-smile-o"></i> Smile <i class="fa fa-caret-down"></i></span>
    </div>
  </div>
</header>


<div class="post-container container">
  <h3>
    <i class="fa fa-user-o"></i>
    King

    <span class="post-date float-right" title="{{moment(1511944970000).format('MMM DD, YYYY, h:mm:ss A')}}">
      <i class="fa fa-pencil-square-o"></i>
      {{moment(1511944970000).fromNow()}}
    </span>
  </h3>

  <article class="post-content">
    <h1>ES6 你可能不知道的事(一)</h1>
    <p><a href="http://taobaofed.org/blog/2016/07/22/es6-basics/" target="_blank" rel="external">http://taobaofed.org/blog/2016/07/22/es6-basics/</a><br>作者: 化辰  发表于: 2016-07-22</p>
<p>ES6 你可能不知道的事 - 基础篇</p>
<p>序</p>
<p>ES6，或许应该叫 ES2015（2015 年 6 月正式发布），对于大多数前端同学都不陌生。</p>
<p>首先这篇文章不是工具书，不会去过多谈概念，而是想聊聊关于每个特性 你可能不知道的事，希望能为各位同学 正确使用 ES6，提供一些指导。</p>
<p>对于 ES6，有些同学已经在项目中有过深入使用了，有些则刚刚开始认识他，但不论你是属于哪一类，相信这篇文章都有适合你的部分。针对文章中的问题或不同意见，欢迎随时拍砖、指正。</p>
<p>正文</p>
<p>Let + Const</p>
<p>这个大概是开始了解 ES6 后，我们第一个感觉自己完全明白并兴致勃勃的开始使用的特性。</p>
<p>以如下方式使用的同学请举下手？</p>
<p>// 定义常量<br>const REG_GET_INPUT = /^\d{1,3}$/;</p>
<p>// 定义配置项<br>let config = {<br>  isDev : false,<br>  pubDir: ‘./admin/‘<br>}</p>
<p>// 引入 gulp<br>let gulp    = require(‘gulp’);</p>
<p>// 引入gulp相关插件<br>let concat  = require(‘gulp-concat’);<br>let uglify  = require(‘gulp-uglify’);<br>let cssnano = require(‘gulp-cssnano’);<br>很多人看完概念之后，第一印象都是：“const 是表示不可变的值，而 let 则是用来替换原来的 var 的。”</p>
<p>所以就会出现上面代码中的样子；一段代码中出现大量的 let，只有部分常量用 const 去做定义，这样的使用方式是错误的。</p>
<p>你可能不知道的事</p>
<p>const 的定义是不可重新赋值的值，与不可变的值(immutable value)不同；const 定义的 Object，在定义之后仍可以修改其属性。</p>
<p>所以其实他的使用场景很广，包括常量、配置项以及引用的组件、定义的 “大部分” 中间变量等，都应该以const做定义。反之就 let 而言，他的使用场景应该是相对较少的，我们只会在 loop(for，while 循环)及少量必须重定义的变量上用到他。</p>
<p>猜想：就执行效率而言，const 由于不可以重新赋值的特性，所以可以做更多语法静态分析方面的优化，从而有更高的执行效率。</p>
<p>所以上面代码中，所有使用 let 的部分，其实都应该是用 const 的。</p>
<p>Template Strings（字符串模板）</p>
<p>字符串模板是我刚接触ES6时最喜欢的特性之一，他语法简洁，语义明确，而且很好的解决了之前字符串拼接麻烦的问题。</p>
<p>因为他并不是 “必须” 的，而且原有的字符串拼接思维根深蒂固，导致我们很容易忽视掉他。</p>
<p>使用实例</p>
<p>我们先来看看他的一般使用场景：</p>
<p>const start = ‘hi all’;</p>
<p>const getName = () =&gt; {<br>  return ‘jelly’;<br>};</p>
<p>const conf = {<br>  fav: ‘Coding’<br>};</p>
<p>// 模板<br>const msg = <code>${start}, my name is ${getName()}, ${conf.fav} is my favourite</code>;<br>你可能不知道的事</p>
<p>// 1. 与引号混用<br>const wantToSay = <code>I&#39;m a &quot;tbfed&quot;</code>;</p>
<p>// 2. 支持多行文本<br>const slogan =<br><code>I have a dream today!</code>;</p>
<p>// 比较适合写HTML<br>const resultTpl =<br><code>&lt;section&gt;
    &lt;div&gt;...&lt;/div&gt;
  &lt;/section&gt;</code>;<br>Enhanced Object Literals（增强的对象字面量）</p>
<p>增强的对象字面量是 ES6 中的升华功能，他设计了很多简写，这些简写不但保留了明确的语义，还减少了我们多余的代码量。</p>
<p>当他的使用成为一个习惯时，我们会看到自己代码变得更为优雅。</p>
<p>你可能不知道的事</p>
<p>const _bookNum = 4;</p>
<p>const basicConfig = {<br>  level: 5<br>}</p>
<p>const config = {<br>  // 直接指定原型对象<br>  <strong>proto</strong>: basicConfig,</p>
<p>  // 属性简写<br>  _bookNum,</p>
<p>  // 方法简写<br>  getBookNum() {<br>    return this.bookNum;<br>  }<br>}<br>Arrows and Lexical This（箭头函数）</p>
<p>箭头函数是ES6中的一个新的语法特性，他的用法简单，形态优雅，备受人们青睐。</p>
<p>大多数同学初识这个特性时，更多的仅仅用它作为函数定义的简写，这其实就有些屈才了。</p>
<p>// 未使用箭头函数的写法<br>{<br>  …</p>
<p>  addOptions: function (options) {</p>
<pre><code>var self = this;

options.forEach(function(name, opts){

  self[name] = self.addChild(name, opts);

});
</code></pre><p>  }<br>}</p>
<p>// 使用箭头函数后的写法<br>{<br>  …</p>
<p>  addOptions: function (options) {</p>
<pre><code>options.forEach((name, opts) =&gt; {

  this[name] = this.addChild(name, opts);

});
</code></pre><p>  }<br>}<br>可以注意到上下两段代码的区别。</p>
<p>在未使用箭头函数前，我们在过程函数中使用父级 this，需要将其显式缓存到另一个中间变量中，因为过程函数有独立的 this 变量，会覆盖父级；使用箭头函数后，不但简写了一个过程函数（ forEach 的参数），还省略掉了 this 的中间变量的定义。</p>
<p>原因：箭头函数没有独立执行上下文（ this ），所以其内部引用 this 对象会直接访问父级。</p>
<p>插播：原来我们定义这个中间变量还有一个有趣的现象，就是明明千奇百怪，例如 self, that, me, _that, _me, Self…，快站出来说说你用过哪个，还是哪几个~</p>
<p>当然，从这块我们也可以看出，箭头函数是无法替代全部 function 的使用场景的，例如我们需要有独立 this 的函数。</p>
<p>你可能不知道的事</p>
<p>箭头函数不但没有独立 this，他也没有独立的 arguments，所以如果需要取不定参的时候，要么使用 function，要么用 ES6 的另一个新特性 rest（具体在 rest 中会有详解）。<br>箭头函数语法很灵活，在只有一个参数或者只有一句表达式做方法体时，可以省略相应括号。<br>// 完整写法<br>const getOptions = (name, key) =&gt; {<br>  …<br>}</p>
<p>// 省略参数括号<br>const getOptions = key =&gt; {<br>  …<br>}</p>
<p>// 省略参数和方法体括号<br>const getOptions = key =&gt; console.log(key);</p>
<p>// 无参数或方法体，括号不能省略<br>const noop = () =&gt; {};<br>有个简单小栗子，这一灵活的语法在写连续的Promise链式调用时，可以使代码更加优雅</p>
<p>gitPromise<br>  .then(() =&gt; git.add())<br>  .then(() =&gt; git.commit())<br>  .then(() =&gt; git.log())<br>  .then((msg) =&gt; {<br>      …<br>  })<br>  .then(() =&gt; git.push())<br>  .catch((err) =&gt; {<br>      utils.error(err);<br>  });<br>Destructuring（解构）</p>
<p>解构这个特性可以简单解读为分别定义，用于一次定义多个变量，常常用于分解方法返回对象为多个变量，分别使用。<br>使用过ES6的同学应该或多或少接触过这个特性，但是你可能不知道它如下几个用法：</p>
<p>你可能不知道的事</p>
<p>const bookSet = [‘UED’, ‘TB fed’, ‘Not find’];<br>const bookCollection = () =&gt; {<br>  return {book1: ‘UED’, book2: ‘TB fed’};<br>};</p>
<p>// 1. 解构也可以设置默认值<br>const {book1, book3 = ‘Not find’} = bookCollection();</p>
<p>// 2. 解构数组时候是可以跳过其中某几项的<br>const [book1,,book3] = bookSet;  // book1 = ‘UED’, book3 = ‘Not find’</p>
<p>// 3. 解构可以取到指定对象的任何属性，包括它包含的方法<br>const {length: setLength} = bookSet;  // setLength = 3<br>Rest + Spread</p>
<p>Rest 和 Spread 主要是应用 … 运算符，完成值的聚合和分解。</p>
<p>你可能不知道的事</p>
<p>// 1. rest 得到的是一个真正的数组而不是一个伪数组<br>const getOptions = function(…args){<br>  console.log(args.join); // function<br>};</p>
<p>// 2. rest 可以配合箭头函数使用，达到取得所有参数的目的<br>const getOptions = (…args) =&gt; {<br>  console.log(args); // array<br>};</p>
<p>// 3. spread 可以用于解构时，聚合所得的值<br>const [opt1, …opts] = [‘one’, ‘two’, ‘three’, ‘four’];</p>
<p>// 4. spread 可以用于数组定义<br>const opts = [‘one’, ‘two’, ‘three’, ‘four’];<br>const config = [‘other’, …opts];<br>Classes</p>
<p>ES6 中实现的一个语法糖，用于简化基于原型集成实现类定义的场景。<br>虽然有很多人不太喜欢这个特性，认为它作为一个简单增强扩展，并没有其他语言 class 应有的特点。<br>但是就我自己观点来看，还是感觉这样一种写法确实比原有的原型继承的写法语义更清晰、明确，而且语法更简单。</p>
<p>同样，可能有些用法是你之前容易忽略掉的，在此做个补充。</p>
<p>你可能不知道的事</p>
<p>// 1. 静态变量<br>// ES6 的类定义实现了静态方法的定义，但静态变量呢？<br>// 可以用如下方式实现:<br>class TbFedMembers{<br>  static get HuaChen(){<br>    return ‘jelly’;<br>  }<br>}<br>TbFedMembers.HuaChen; // “化辰”</p>
<p>// 2. 私有属性（私有属性有多种实现方式，只谈及其中一种）<br>// 闭包<br>const TbFedMembers = (() =&gt; {<br>  const HuaChen = ‘jelly’;</p>
<p>  return class{<br>    getOneMemberName(){<br>      return HuaChen;<br>    }<br>  };<br>})();<br>Promises</p>
<p>Promise 不只是一个对象、一个语法，他更是一种异步编程方式的变化<br>相信使用过 ES6 的同学都已经开始尝试了 Promise，甚至在不支持ES6的时候，已经开始使用一些基于 Promise 思想的开源框架。</p>
<p>那么我们之前用 Promise 究竟用的对么？有什么需要注意的点呢？</p>
<p>你可能不知道的事</p>
<p>// 1. 多个异步任务同时执行用 Promise.all，顺序执行使用链式调用<br>// Promise.all<br>Promise<br>  .all([jsBuildPromise, cssBuildPromise])<br>  .then(() =&gt; {<br>    …<br>  });</p>
<p>// chain<br>jsBuildPromise<br>  .then(() =&gt; cssBuildPromise)<br>  .then(() =&gt; {<br>    …<br>  });</p>
<p>// 2. Promise 的链式调用需要每一个过程返回一个 Promise 对象才能保证顺序执行<br>gitPromise<br>  .then(() =&gt; git.add())  // 正确，箭头函数简写<br>  .then(() =&gt; {<br>    git.commit(); // 错误，函数返回 undefined，会立即执行下一过程<br>  })<br>  .then(() =&gt; {<br>    return git.log(); // 正确<br>  });</p>
<p>// 3. Promise 需要调用 catch 方法来捕获错误，而且过程内的错误不会阻塞后续代码执行<br>new Promise(() =&gt; {<br>  f;  // not define error !<br>})<br>.catch((err) =&gt; {<br>  console.log(err)  // show ‘f is not define’<br>});<br>console.log(‘error test’);  // 此行可以被正常执行<br>结语</p>
<p>基础篇主要是讲了我们最常用的一些特性，后续如果大家感兴趣，还可以再来个 “进阶篇”，最后，希望文章中的部分内容可以对大家理解和使用 ES6 有所帮助。</p>
<p>参考资料</p>
<p><a href="https://www.stackoverflow.com" target="_blank" rel="external">https://www.stackoverflow.com</a><br><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" target="_blank" rel="external">https://developer.mozilla.org/en-US/docs/Web/JavaScript</a><br><a href="https://babeljs.io/docs/learn-es2015/" target="_blank" rel="external">https://babeljs.io/docs/learn-es2015/</a><br><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" target="_blank" rel="external">https://developer.mozilla.org/en-US/docs/Web/JavaScript</a><br><a href="https://ponyfoo.com/articles/es6-spread-and-butter-in-depth" target="_blank" rel="external">https://ponyfoo.com/articles/es6-spread-and-butter-in-depth</a><br><a href="http://12devs.co.uk/articles/promises-an-alternative-way-to-approach-asynchronous-javascript/" target="_blank" rel="external">http://12devs.co.uk/articles/promises-an-alternative-way-to-approach-asynchronous-javascript/</a><br><a href="http://www.2ality.com/2015/01/es6-destructuring.html" target="_blank" rel="external">http://www.2ality.com/2015/01/es6-destructuring.html</a><br><a href="http://www.datchley.name/es6-rest-spread-defaults-and-destructuring/" target="_blank" rel="external">http://www.datchley.name/es6-rest-spread-defaults-and-destructuring/</a><br>分享到</p>

  </article>
</div>


    




</div>

<div class="footer-wrapper container">
  <footer class="footer clearfix">
    <a href="http://blog.vikibeta.com" class="footer-logo">
      <i class="fa fa-github"></i>
    </a>
    <ul class="footer-social-link">
      <li>© 2016 King</li>
      <li><a href="http://blog.vikibeta.com">Home</a></li>
      
    </ul>
    <div class="footer-theme-info">
      Theme <a href="//github.com/sabrinaluo/hexo-theme-replica">Replica</a>
      by <a href="//github.com/sabrinaluo">Hiitea</a> ❤ Powered by Hexo
    </div>
  </footer>
</div>




<script src="/js/main.js"></script>

</body>
</html>
